<%- include('layout', { user: user, body: '' }) %>

<div class="page-container">
  <div class="products-header">
    <h1>CueCube Product Catalog</h1>
    <p>Click a product name to view full details.</p>
  </div>

  <div class="products-grid">
    <% products.forEach(function(p, idx) { %>
      <div class="product-card">
        <div class="product-card-image">
          <img src="<%= p.images && p.images.length ? p.images[0] : '/images/placeholder.png' %>" alt="<%= p.name %>">
        </div>
        <div class="product-card-body">
          <h2><%= p.name %></h2>
          <p class="byline">by CueCube</p>
          <p class="price-line">Price from $<%= p.price100.toFixed(2) %></p>
          <% if (p.shortDescription) { %>
            <p class="short-desc"><%= p.shortDescription %></p>
          <% } %>
          <% if (p.images && p.images.length) { %>
            <div class="thumb-row">
              <% p.images.forEach(function(img, i) { %>
                <img src="<%= img %>" alt="thumb" class="thumb">
              <% }) %>
            </div>
          <% } %>
          <a class="btn" href="/products/<%= idx %>">View</a>
        </div>
      </div>
    <% }) %>
  </div>
</div>
