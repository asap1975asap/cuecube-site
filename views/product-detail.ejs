<%- include('layout', { body: `
<section class="product-detail">
  <div class="gallery">
    <div class="gallery-main">
      <img id="mainImage" src="${activeTip.images[0]}" alt="${product.name}" />
    </div>
    <div class="gallery-thumbs" id="thumbContainer">
      ${activeTip.images.map((img, idx) => `
        <img src="${img}" data-src="${img}" class="thumb ${idx === 0 ? 'active' : ''}" alt="thumb ${idx+1}" />
      `).join('')}
    </div>
  </div>

  <div class="product-info">
    <h1>${product.name}</h1>
    <p class="product-brand">by ${product.brand}</p>

    <label class="field">
      Tip profile:
      <select id="tipSelect" data-product-id="${product.id}">
        ${product.tipProfiles.map(tp => `
          <option value="${tp.code}" ${tp.code === activeTip.code ? 'selected' : ''}>${tp.label}</option>
        `).join('')}
      </select>
    </label>

    <div class="pricing">
      <h3>Wholesale pricing:</h3>
      <p>10+ pcs: <b>$${product.basePrice.toFixed(2)}</b> per unit</p>
      <p>50+ pcs: <b>$${(product.basePrice * 0.85).toFixed(2)}</b> per unit</p>
      <p>100+ pcs: <b>$${(product.basePrice * 0.85 * 0.85).toFixed(2)}</b> per unit</p>
    </div>

    <label class="field">
      Quantity (min 10 pcs):
      <input type="number" id="qtyInput" value="${qty}" min="10" step="1" />
    </label>

    <p class="price-line">Unit price: $<span id="unitPrice">${unitPrice.toFixed(2)}</span></p>
    <p class="price-line">Total: $<span id="totalPrice">${totalPrice.toFixed(2)}</span></p>

    <a id="placeOrderBtn" class="btn"
       href="/order?productId=${product.id}&qty=${qty}&diameter=${activeTip.code}">
       Place order
    </a>

    <div class="product-desc">
      <h3>Product details</h3>
      <pre class="pre-text">${product.descriptionLong}</pre>
    </div>
  </div>
</section>
` }) %>
